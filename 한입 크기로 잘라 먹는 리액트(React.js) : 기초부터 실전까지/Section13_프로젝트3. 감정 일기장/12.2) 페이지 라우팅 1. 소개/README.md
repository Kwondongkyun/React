# 페이지 라우팅

경로에 따라 알맞은 페이지를 렌더링하는 과정  
예) `/new` → `new` 페이지 렌더링


## 페이지 라우팅 과정 예시
<img width="450" alt="페이지 라우팅 과정 예시" src="https://github.com/user-attachments/assets/1176af51-a1d8-4b03-a12c-7e0da0d8aeb0" />

1. 사용자가 블로그 같은 특정 페이지에 접속을 원함  
2. 브라우저를 이용해서 웹서버에게 `/blog` 같은 주소로 요청 보냄  
3. 웹서버가 요청에 따라서 브라우저에서 블로그 페이지를 반환해줌  
4. 브라우저는 반환된 블로그 페이지를 사용자가 볼 수 있도록 렌더링  

#

## 페이지 라우팅의 원리

### MPA 방식 (Multi Page Application)
<img width="400" alt="MPA 방식" src="https://github.com/user-attachments/assets/0490edab-9186-41e8-9ed8-b1841ecd6aa9" />
<img width="400" alt="MPA 방식 SSR" src="https://github.com/user-attachments/assets/43a543be-c258-4f3a-9716-b621c816d846" />

- 웹서버가 사용자에게 제공할 모든 페이지의 HTML 파일을 미리 가지고 있음  
- 브라우저에서 `/blog` 같은 특정 주소를 요청하면, 서버는 해당 페이지를 찾아서 반환  
- 브라우저는 서버에서 받은 HTML 페이지를 그대로 화면에 렌더링  

👉 서버가 여러 개의 HTML 페이지를 미리 가지고 있는 방식  
👉 서버가 미리 완성된 페이지를 제공하는 방식 = **서버 사이드 렌더링(SSR, Server Side Rendering)**

#

## MPA 방식의 단점
<img width="400" alt="MPA 방식 단점 1" src="https://github.com/user-attachments/assets/fd1cf670-5f29-4fa4-93fb-9b96559cacf2" />

1. **페이지 이동이 느리고 부드럽지 않음**  
   - 페이지 이동 시 기존 페이지를 완전히 제거하고 새 HTML을 받아와 다시 그려야 함  
   - 페이지에 공통으로 사용되는 요소가 있어도 매번 새로 받아오기 때문에 비효율적  
   - 이동할 때 화면이 깜빡이는 등 사용자 경험(UX)이 좋지 않음
  
<img width="400" alt="MPA 방식 단점 2" src="https://github.com/user-attachments/assets/f521343e-a112-4ce7-9789-76e3d79312a2" />

2. **서버 부하 증가**  
   - 페이지를 이동할 때마다 새로운 요청이 서버로 전송됨  
   - 다수의 사용자가 동시에 접속하면 서버 부하가 심해짐  

💡 **리액트(React)** 는 이러한 문제를 해결하기 위해 **MPA 방식이 아닌 SPA 방식을 사용함**  

#

## React의 SPA (Single Page Application)

- 페이지 이동이 매끄럽고 효율적으로 처리됨  
- 다수의 사용자가 몰려도 서버 부하가 적음  

### SPA 방식의 특징
<img width="300" alt="스크린샷 2025-01-29 21 57 01" src="https://github.com/user-attachments/assets/68f5d1b8-5061-4cab-89cb-8c87f5dd6ad6" />
<img width="300" alt="스크린샷 2025-01-29 21 57 49" src="https://github.com/user-attachments/assets/3cd3f611-7a5c-48e4-aac7-4aa0f89c11e3" />

- 웹서버가 페이지를 **한 개만** 가지고 있음 (`index.html`)  
- 추가로 리액트 컴포넌트와 기타 기능들이 포함된 **JS 파일**이 존재

<br />

### SPA 방식의 동작 원리
<img width="400" alt="SPA 방식의 동작 원리" src="https://github.com/user-attachments/assets/3fa39be8-c259-444c-95d3-193c4ebbe081" />

1. 사용자가 리액트 웹서버에 접속  
2. 요청한 경로와 관계없이 항상 `index.html`을 브라우저에 전송  
3. 이후, **JS 파일(리액트 컴포넌트 등)** 을 추가로 다운로드하여 실행  
4. 리액트가 실행되면서 브라우저에서 동적으로 페이지를 변경  

👉 **초기 로딩 시 한 번만 서버 요청을 보내고, 이후에는 JS를 활용해 페이지를 동적으로 렌더링**  
👉 **이 방식이 바로 클라이언트 사이드 렌더링(CSR, Client Side Rendering)**

> ### 번들링
> - 여러 개의 JS 파일들을 묶어주는 행위
> - Vite가 담당한다.
>
> ### 번들 파일
> - 번들링 되어 브라우저에게 전달되는 JS 파일
> - Vite에 의해 번들링된 하나의 JS 파일

#

## SPA 방식의 장점

1. **빠르고 부드러운 페이지 이동**  
   - 새로운 HTML을 받아오지 않고, 현재 페이지에서 필요한 부분만 업데이트  
   - 브라우저에서 UI를 즉시 변경 가능하여 화면 깜빡임 없이 자연스러운 전환 가능  

2. **서버 부하 감소**  
   - 페이지 이동 시 서버 요청이 필요하지 않음  
   - 사용자가 많이 접속해도 서버 부담이 적음  

---

## 정리

| 방식  | 설명 | 장점 | 단점 |
|--------|-----------------|----------------------|------------------|
| **MPA** | 페이지마다 개별 HTML 파일을 서버에서 제공 | SSR을 통해 SEO(검색엔진 최적화)에 유리 | 페이지 이동 시 깜빡임 발생, 서버 부하 큼 |
| **SPA** | `index.html` 하나만 제공, 이후 JS로 페이지 변경 | 빠른 페이지 이동, 서버 부하 적음 | 초기 로딩 속도가 느릴 수 있음, SEO 최적화 어려움 |

👉 **MPA**는 전통적인 방식으로 여전히 사용되지만,  
👉 **SPA**는 속도와 성능 면에서 유리하여 리액트 같은 최신 프레임워크에서 주로 사용됨! 🚀
